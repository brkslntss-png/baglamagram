<!DOCTYPE html>
<html lang="tr">
<head>
    <link rel="shortcut icon" href="ikonn.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Online EÄŸitim | Mahmut Burak ASLANTAÅ</title>
    
    <meta name="description" content="Mahmut Burak ASLANTAÅ ile profesyonel online baÄŸlama eÄŸitimi. Ders notlarÄ±, nota arÅŸivi, dikte Ã§alÄ±ÅŸmalarÄ± ve kiÅŸiye Ã¶zel Ã¶ÄŸrenci portalÄ±na buradan ulaÅŸÄ±n.">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://baglamagram.com.tr/online-egitim.html">
    <meta property="og:title" content="Online BaÄŸlama EÄŸitimi | Mahmut Burak ASLANTAÅ">
    <meta property="og:description" content="BaÄŸlama eÄŸitiminize dijital bir boyut kazandÄ±rÄ±n. Materyallere ve ders dÃ¶kÃ¼manlarÄ±na anÄ±nda eriÅŸin.">
    <meta property="og:image" content="https://i.hizliresim.com/h6g4amm.jpg">
    <meta property="og:locale" content="tr_TR">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Online BaÄŸlama EÄŸitimi | Mahmut Burak ASLANTAÅ">
    <meta name="twitter:description" content="Ders notlarÄ±, notalar ve dikte Ã§alÄ±ÅŸmalarÄ±yla online baÄŸlama portalÄ±.">
    <meta name="twitter:image" content="https://i.hizliresim.com/h6g4amm.jpg">

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600;700&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <style>
        /* --- TEMEL AYARLAR --- */
        :root {
            --primary: #000000;
            --accent: #c5a059; /* AltÄ±n Rengi */
            --bg-dark: #0f0f0f;
            --bg-sidebar: #151515;
            --bg-gradient: linear-gradient(135deg, #0a0a0a 0%, #161616 100%);
            --text: #ffffff;
            --text-secondary: #b0b0b0;
            --whatsapp-green: #25d366;
            --ai-purple: #9d4edd; 
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body { 
            font-family: 'Montserrat', sans-serif; 
            font-weight: 300;
            background: var(--bg-dark);
            background-image: var(--bg-gradient);
            color: var(--text); 
            line-height: 1.6;
            display: flex; flex-direction: column; min-height: 100vh;
        }

        /* --- MENÃœ (NAV) --- */
        nav {
            background: rgba(0, 0, 0, 0.95); padding: 20px 0; position: sticky; top: 0; z-index: 1000;
            border-bottom: 1px solid rgba(197, 160, 89, 0.2);
        }
        .nav-container { display: flex; justify-content: center; align-items: center; max-width: 1200px; margin: 0 auto; position: relative; }
        nav ul { display: flex; list-style: none; gap: 40px; padding: 0 20px; }
        nav a { color: var(--text-secondary); text-decoration: none; font-size: 0.8rem; font-weight: 500; text-transform: uppercase; letter-spacing: 2px; transition: all 0.3s ease; }
        nav a:hover, nav a.active { color: var(--accent); }
        .menu-toggle { display: none; font-size: 1.5rem; color: var(--accent); cursor: pointer; position: absolute; right: 20px; }

        /* --- GÄ°RÄ°Å BUTONU --- */
        .portal-login-btn-container { text-align: center; margin: 40px 0; display: flex; justify-content: center; }
        .portal-btn {
            background: #111; border: 1px solid var(--accent); color: var(--accent); padding: 20px 40px;
            font-family: 'Playfair Display', serif; font-size: 1.2rem; text-transform: uppercase; letter-spacing: 1px;
            cursor: pointer; transition: all 0.3s ease; display: flex; align-items: center; gap: 20px;
            border-radius: 5px; box-shadow: 0 0 15px rgba(197, 160, 89, 0.1);
        }
        .portal-btn:hover { background: var(--accent); color: #000; transform: translateY(-3px); }
        .icon-stack { position: relative; display: inline-block; width: 40px; height: 40px; }
        .icon-stack .fa-laptop { font-size: 36px; }
        .icon-stack .fa-music { position: absolute; font-size: 14px; top: 50%; left: 50%; transform: translate(-50%, -60%); color: var(--accent); }
        .portal-btn:hover .icon-stack .fa-music { color: #000; }

        /* --- SAYFA Ä°Ã‡ERÄ°ÄÄ° --- */
        .page-content { 
            flex: 1; 
            padding: 20px; 
            max-width: 1400px; 
            margin: 0 auto; 
            width: 100%;
            animation: fadeInUp 1s ease-out forwards; 
            opacity: 0; 
        }
        
        @keyframes fadeInUp {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        h2, h3, h4 { font-family: 'Playfair Display', serif; color: var(--accent); text-transform: uppercase; letter-spacing: 1px; margin-bottom: 15px; }

        /* PUBLIC CONTENT */
        .features-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px; margin-bottom: 50px; }
        .feature-card { background: rgba(255, 255, 255, 0.03); padding: 30px; border-left: 2px solid var(--accent); transition: transform 0.3s; }
        .feature-card:hover { transform: translateY(-5px); background: rgba(255, 255, 255, 0.05); }
        .feature-card i { font-size: 2rem; color: var(--accent); margin-bottom: 20px; }
        .apply-container { background: #050505; padding: 40px; border: 1px solid #222; max-width: 800px; margin: 0 auto; }
        .form-group { display: flex; flex-direction: column; gap: 15px; }
        input, select, textarea { background: rgba(0, 0, 0, 0.6); border: 1px solid #333; color: white; padding: 12px; font-family: 'Montserrat', sans-serif; outline: none; }
        input:focus { border-color: var(--accent); }
        .btn { padding: 12px 30px; border: 1px solid var(--accent); color: var(--accent); background: transparent; text-transform: uppercase; cursor: pointer; transition: 0.3s; font-weight: bold; }
        .btn:hover { background: var(--accent); color: #000; }

        /* --- POPUP GÄ°RÄ°Å --- */
        #login-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.95); z-index: 9999;
            display: none; justify-content: center; align-items: center; flex-direction: column; animation: fadeIn 0.3s;
        }
        .login-box {
            border: 1px solid var(--accent); padding: 40px; text-align: center; background: #111;
            box-shadow: 0 0 30px rgba(197, 160, 89, 0.3); width: 90%; max-width: 400px; position: relative;
        }
        .close-login { position: absolute; top: 10px; right: 15px; color: #fff; font-size: 1.5rem; cursor: pointer; }

        /* --- Ã–ÄRENCÄ° PORTALI --- */
        #student-portal { display: none; width: 100%; min-height: 80vh; background: #000; border: 1px solid #333; margin-top: 20px; }
        .portal-layout { display: flex; height: 100%; min-height: 80vh; }

        /* SIDEBAR */
        .sidebar {
            width: 25%; background: var(--bg-sidebar); padding: 30px; border-right: 1px solid #333;
            display: flex; flex-direction: column; transition: width 0.3s ease; position: relative;
        }
        .sidebar.collapsed { width: 70px; padding: 20px 10px; }
        .sidebar.collapsed .user-info, .sidebar.collapsed .menu-title { display: none; }
        .sidebar.collapsed .menu-link span, .sidebar.collapsed .whatsapp-sidebar-btn span { display: none; }
        .sidebar.collapsed .menu-link { justify-content: center; }
        
        .hamburger-btn { font-size: 1.5rem; color: var(--accent); cursor: pointer; margin-bottom: 30px; align-self: flex-start; }
        .user-info { margin-bottom: 40px; border-bottom: 1px solid #333; padding-bottom: 20px; }
        .user-name { color: var(--accent); font-family: 'Century Gothic', 'CenturyGothic', 'AppleGothic', sans-serif; font-size: 1.4rem; font-weight: normal; line-height: 1.2; }
        .premium-badge { font-size: 0.7rem; color: #fff; background: #333; padding: 4px 8px; border-radius: 4px; display: inline-block; margin-top: 10px; letter-spacing: 1px; text-transform: uppercase; }
        
        .menu-link { display: flex; align-items: center; gap: 15px; color: #bbb; text-decoration: none; padding: 12px; margin-bottom: 5px; border-radius: 5px; transition: 0.3s; cursor: pointer;}
        .menu-link:hover, .menu-link.active { background: #222; color: var(--accent); }
        .menu-link i { width: 20px; text-align: center; }

        /* SIDEBAR WHATSAPP BUTTON */
        .whatsapp-sidebar-btn {
            display: flex; align-items: center; gap: 15px; background: var(--whatsapp-green); color: white;
            padding: 12px; border-radius: 5px; text-decoration: none; font-weight: bold; margin-top: auto;
            transition: 0.3s; justify-content: center;
        }
        .whatsapp-sidebar-btn:hover { background: #1ebc57; }

        /* PORTAL CONTENT */
        .portal-content { width: 75%; padding: 40px; overflow-y: auto; background: var(--bg-dark); }
        .sidebar.collapsed + .portal-content { width: calc(100% - 70px); }
        .view-section { display: none; animation: fadeIn 0.5s; }
        .view-section.active { display: block; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* DASHBOARD */
        .dashboard-header h1 { 
            font-family: 'Century Gothic', CenturyGothic, AppleGothic, sans-serif;
            color: var(--accent); margin-bottom: 30px; border-bottom: 1px solid #333; padding-bottom: 10px; 
            font-weight: normal;
        }
        .dashboard-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 30px; }
        .dash-card { background: #111; border: 1px solid #333; padding: 40px; text-align: center; border-radius: 8px; cursor: pointer; transition: 0.3s; position: relative; overflow: hidden; }
        .dash-card:hover { border-color: var(--accent); transform: translateY(-5px); }
        .dash-card i { font-size: 3rem; color: var(--accent); margin-bottom: 20px; }
        .dash-card h3 { color: #fff; margin-bottom: 10px; }
        
        /* Ã–ZEL BAÄLAMA Ä°KONU Ä°Ã‡Ä°N */
        .custom-icon { width: 80px; height: auto; margin-bottom: 20px; filter: grayscale(100%) brightness(200%); transition: 0.3s; display: block; margin-left: auto; margin-right: auto;}
        .dash-card:hover .custom-icon { filter: none; }

        /* BURAK AI HOCA KART STÄ°LLERÄ° (Sadece Dashboard'da gÃ¶rÃ¼nÃ¼r) */
        .ai-card {
            border: 1px solid var(--accent);
            box-shadow: 0 0 15px rgba(197, 160, 89, 0.1);
            background: linear-gradient(180deg, #161616 0%, #0a0a0a 100%);
        }
        .ai-card::before {
            content: '';
            position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle, rgba(197, 160, 89, 0.1) 0%, transparent 70%);
            animation: pulseGlow 4s infinite;
        }
        @keyframes pulseGlow { 0% { transform: scale(1); opacity: 0.5; } 50% { transform: scale(1.1); opacity: 0.8; } 100% { transform: scale(1); opacity: 0.5; } }
        .ai-badge {
            position: absolute; top: 10px; right: 10px; background: var(--accent); color: black;
            font-size: 0.7rem; padding: 2px 8px; border-radius: 10px; font-weight: bold; z-index: 2;
        }

        /* CHAT ARAYÃœZ STÄ°LLERÄ° */
        .chat-container { display: flex; flex-direction: column; height: 60vh; border: 1px solid #333; border-radius: 10px; overflow: hidden; background: #000; }
        .chat-box { flex: 1; padding: 20px; overflow-y: auto; display: flex; flex-direction: column; gap: 15px; }
        .chat-message { max-width: 80%; padding: 10px 15px; border-radius: 10px; font-size: 0.95rem; line-height: 1.4; }
        .chat-message.ai { align-self: flex-start; background: #222; border-left: 3px solid var(--accent); color: #ddd; }
        .chat-message.user { align-self: flex-end; background: var(--accent); color: #000; }
        /* Yeni Resim Stili */
        .chat-message.user img, .chat-message.ai img { max-width: 100%; border-radius: 5px; margin-top: 5px; border: 1px solid #444; }
        
        .chat-input-area { padding: 15px; background: #111; border-top: 1px solid #333; display: flex; gap: 10px; align-items: center; }
        .chat-input { flex: 1; background: #222; border: 1px solid #333; color: white; padding: 10px; border-radius: 5px; outline: none; }
        .chat-action-btn { background: transparent; border: 1px solid #444; color: var(--accent); padding: 10px; border-radius: 5px; cursor: pointer; transition: 0.2s; position: relative; }
        .chat-action-btn:hover { background: #222; border-color: var(--accent); }
        .chat-send-btn { background: var(--accent); color: black; border: none; padding: 10px 20px; border-radius: 5px; font-weight: bold; cursor: pointer; }

        /* RESÄ°M Ã–NÄ°ZLEME ALANI (YENÄ°) */
        #imagePreviewContainer { display: none; position: absolute; bottom: 70px; left: 20px; background: #222; padding: 10px; border: 1px solid var(--accent); border-radius: 5px; z-index: 10; }
        #imagePreview { max-width: 100px; max-height: 100px; display: block; }
        #removeImage { color: red; cursor: pointer; text-align: center; display: block; margin-top: 5px; font-size: 0.8rem; }

        /* DASHBOARD WHATSAPP BUTTON */
        .dash-whatsapp-btn {
            display: block; background: var(--whatsapp-green); color: white; text-align: center;
            padding: 20px; margin-top: 30px; border-radius: 8px; text-decoration: none;
            font-size: 1.1rem; font-weight: bold; transition: 0.3s;
        }
        .dash-whatsapp-btn:hover { background: #1ebc57; transform: translateY(-2px); }

        /* GRIDLER */
        .category-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .cat-box { background: #151515; padding: 30px; border-left: 3px solid var(--accent); cursor: pointer; transition: 0.3s; }
        .cat-box:hover { background: #222; }
        .cat-title { color: var(--accent); font-family: 'Playfair Display', serif; font-size: 1.2rem; display: block; margin-bottom: 5px; }
        .cat-desc { color: #fff; font-size: 0.9rem; opacity: 0.8; }
        
        /* 4 SÃ¼tunlu Grid */
        .materials-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 20px; }
        
        .mat-item { background: #1a1a1a; border: 1px solid #333; padding: 20px 10px; text-align: center; border-radius: 5px; cursor: pointer; transition: 0.3s; text-decoration: none; }
        .mat-item:hover { border-color: var(--accent); background: #000; }
        .mat-item i { font-size: 2rem; color: #d45d5d; display: block; margin-bottom: 10px; }
        .mat-item span { font-size: 0.8rem; color: #fff; display: block; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

        /* EXAM LISTE */
        .exam-row { background: #151515; padding: 20px; border-bottom: 1px solid #222; display: flex; justify-content: space-between; align-items: center; cursor: pointer; transition: 0.2s; }
        .exam-row:hover { background: #222; border-left: 3px solid var(--accent); }
        .exam-detail-container { background: #111; padding: 30px; border-radius: 10px; border: 1px solid #333; margin-top: 20px; }
        .answer-key-btn { background: #222; color: #fff; padding: 20px; width: 100%; text-align: center; border: 1px dashed var(--accent); cursor: pointer; font-size: 1.1rem; transition: 0.3s; margin-top: 20px; }
        .answer-key-btn:hover { background: var(--accent); color: #000; }

        /* MODAL */
        .image-modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); z-index: 10000; display: none; justify-content: center; align-items: center; }
        .image-modal img { max-width: 90%; max-height: 90%; border: 2px solid var(--accent); }
        .close-modal { position: absolute; top: 20px; right: 30px; color: #fff; font-size: 3rem; cursor: pointer; }

        /* MOBÄ°L RESPONSIVE */
        @media (max-width: 900px) {
            .portal-layout { flex-direction: column; }
            .sidebar { width: 100%; height: auto; padding: 20px; border-right: none; border-bottom: 1px solid #333; }
            .sidebar.collapsed { height: 60px; overflow: hidden; padding: 10px 20px; }
            .sidebar.collapsed .hamburger-btn { margin-bottom: 0; }
            .portal-content { width: 100%; }
            .features-grid, .category-grid, .dashboard-grid { grid-template-columns: 1fr; }
            .materials-grid { grid-template-columns: repeat(2, 1fr); }
            nav ul { display: none; flex-direction: column; position: absolute; top: 100%; left: 0; width: 100%; background: #000; padding: 20px 0; border-bottom: 1px solid var(--accent); }
            nav ul.aktif { display: flex; }
            .menu-toggle { display: block; }
        }

        footer { background: #050505; padding: 40px 20px; text-align: center; border-top: 1px solid #1a1a1a; margin-top: auto; }
        .social-wrapper { display: flex; justify-content: center; gap: 30px; margin-bottom: 20px; }
    </style>
</head>
<body>

    <nav>
        <div class="nav-container">
            <div class="menu-toggle" onclick="menuyuAcKapa()">
                <i class="fas fa-bars"></i>
            </div>
            <ul id="anaMenu">
                <li><a href="index.html">ANA SAYFA</a></li>
                <li><a href="hakkinda.html">HAKKINDA</a></li>
                <li><a href="online-egitim.html" class="active">ONLINE EÄÄ°TÄ°M</a></li>
                <li><a href="notalar.html">NOTALAR</a></li>
                <li><a href="siirler.html">ÅÄ°Ä°RLER</a></li>
                <li><a href="konserler.html">KONSERLER</a></li>
                </ul>
        </div>
    </nav>

    <div id="login-overlay">
        <div class="login-box">
            <span class="close-login" onclick="girisKapat()">Ã—</span>
            <h3>Ã–ÄRENCÄ° GÄ°RÄ°ÅÄ°</h3>
            <p style="color: #888; margin-bottom: 20px; font-size: 0.9rem;">Sisteme eriÅŸmek iÃ§in ÅŸifrenizi girin.</p>
            <input type="password" id="studentPass" placeholder="Åifreniz">
            <button onclick="sistemeGiris()" class="btn" style="background: var(--accent); color: black;">GÄ°RÄ°Å YAP</button>
            <p id="loginError" style="color: red; display: none; margin-top: 10px;">HatalÄ± ÅŸifre!</p>
        </div>
    </div>

    <div class="page-content">
        
        <div id="portal-entry-btn-section" class="portal-login-btn-container">
            <button onclick="girisAc()" class="portal-btn">
                <div class="icon-stack">
                    <i class="fas fa-laptop"></i>
                    <i class="fas fa-music"></i>
                </div>
                Ã–ÄRENCÄ° PORTALINA GÄ°RÄ°Å YAP
            </button>
        </div>

        <div id="public-content">
            <div style="text-align: center; margin-bottom: 50px;">
                <h2>Neden Online EÄŸitim?</h2>
                <div style="width: 60px; height: 2px; background: var(--accent); margin: 15px auto;"></div>
            </div>
            <div class="features-grid">
                <div class="feature-card"><i class="fas fa-home"></i><h4>Evin OrtamÄ±nda Ders RahatlÄ±ÄŸÄ±</h4><p>Ä°ÅŸten eve dÃ¶ndÃ¼ÄŸÃ¼nÃ¼zde, trafiÄŸe girmeden ve kurs saatlerine yetiÅŸme stresi yaÅŸamadan baÄŸlamanÄ±zÄ± elinize alÄ±n.</p></div>
                <div class="feature-card"><i class="fas fa-moon"></i><h4>Mesai SonrasÄ± Sanat</h4><p>Ã‡oÄŸu kurs akÅŸam 19:00'da kapÄ±larÄ±nÄ± kapatÄ±r. Biz ise tam o saatlerde baÅŸlÄ±yoruz.</p></div>
                <div class="feature-card"><i class="fas fa-user-tie"></i><h4>Premium Ã–ÄŸrenci PortalÄ±</h4><p>Bu bÃ¶lÃ¼mde, yalnÄ±zca kendinize Ã¶zel verilen ÅŸifre ile eriÅŸebileceÄŸiniz ders materyalleri yer almaktadÄ±r. TÃ¼m iÃ§erikler, Ã¶ÄŸrenme sÃ¼recini desteklemek amacÄ±yla sesli ve gÃ¶rsel materyallerle hazÄ±rlanmÄ±ÅŸtÄ±r. Materyaller dÃ¼zenli olarak gÃ¼ncellenmekte ve seviyelere gÃ¶re yapÄ±landÄ±rÄ±lmaktadÄ±r.</p></div>
                <div class="feature-card"><i class="fab fa-whatsapp"></i><h4>Kesintisiz Ä°letiÅŸim</h4><p>Ders bittiÄŸinde baÄŸÄ±mÄ±z kopmaz, DilediÄŸiniz zaman WhatsApp Ã¼zerinden Ã¶devlerinizi gÃ¶nderip, kafanÄ±za takÄ±lan sorularÄ± sorup, videolarÄ±nÄ±zÄ± gÃ¶nderebilirsiniz. Bu Ã¶zelliÄŸe sadece Ã¶ÄŸrenci portalÄ± Ã¼zerinden eriÅŸim saÄŸlayabilirsiniz.</p></div>
            </div>
            <div class="apply-container">
                <h3 style="text-align: center; margin-bottom: 25px;">BAÅVURU FORMU</h3>
                <form action="https://formspree.io/f/xnjvyknz" method="POST" class="form-group">
                    <input type="text" name="ad_soyad" placeholder="Ad Soyad" required>
                    <input type="tel" name="telefon" placeholder="Telefon NumaranÄ±z" required>
                    <div style="display: flex; gap: 10px;"><input type="number" name="yas" placeholder="YaÅŸ (16+)" min="16" required style="flex:1;"><input type="text" name="meslek" placeholder="Meslek (Opsiyonel)" style="flex:1;"></div>
                    <select name="seviye"><option value="" disabled selected>Mevcut Seviyeniz</option><option value="sifir">HiÃ§ Bilmiyorum</option><option value="temel">Temel Seviye</option><option value="ileri">Ä°leri Seviye</option></select>
                    <textarea name="mesaj" rows="4" placeholder="MÃ¼zikal hedefleriniz..." required></textarea>
                    <button type="submit" class="btn" style="width: 100%;">GÃ–NDER</button>
                </form>
            </div>
        </div>

        <div id="student-portal">
            <div class="portal-layout">
                
                <div class="sidebar" id="sidebar">
                    <div class="hamburger-btn" onclick="toggleSidebar()">
                        <i class="fas fa-bars"></i>
                    </div>
                    <div class="user-info">
                        <div class="user-name" id="displayAd">Ad</div>
                        <div class="user-name" id="displaySoyad" style="text-transform: uppercase;">SOYAD</div>
                        <div class="premium-badge">PREMIUM ÃœYE</div>
                    </div>
                    <div class="menu-links">
                        <a onclick="sayfaGoster('dashboard-view')" class="menu-link active">
                            <i class="fas fa-home"></i> <span>Ana Sayfa</span>
                        </a>
                        <br>
                        <div style="color: #666; font-size: 0.8rem; margin-bottom: 5px; padding-left: 12px;" class="menu-title">EÄÄ°TÄ°MLERÄ°M</div>
                        <a onclick="sayfaGoster('baglama-menu-view')" class="menu-link">
                            <i class="fas fa-music"></i> <span>BaÄŸlama EÄŸitimi</span>
                        </a>
                        <a onclick="sayfaGoster('exam-categories-view')" class="menu-link">
                            <i class="fas fa-edit"></i> <span>Yetenek SÄ±navÄ± HazÄ±rlÄ±k</span>
                        </a>
                        <a onclick="sayfaGoster('ai-mentor-view')" class="menu-link" style="color: var(--accent);">
                            <i class="fas fa-robot"></i> <span>BurakAI Hoca</span>
                        </a>
                    </div>

                    <a href="https://wa.me/905335060921" target="_blank" class="whatsapp-sidebar-btn">
                        <i class="fab fa-whatsapp"></i> <span>Soru Sor / Ã–dev GÃ¶nder</span>
                    </a>
                </div>

                <div class="portal-content">
                    
                    <div id="dashboard-view" class="view-section active">
                        <div class="dashboard-header">
                            <h1 id="welcomeTitle">Merhaba!</h1>
                        </div>
                        <br>
                        <div class="dashboard-grid">
                            <div class="dash-card" onclick="sayfaGoster('baglama-menu-view')">
                                <img src="baglama-ikon.png" class="custom-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline-block'">
                                <i class="fas fa-music" style="display:none; font-size:3rem; color:var(--accent); margin-bottom:20px;"></i>
                                <h3>BAÄLAMA EÄÄ°TÄ°MÄ°</h3>
                                <p>Ders notlarÄ±, notalar ve egzersizler.</p>
                            </div>

                            <div class="dash-card ai-card" onclick="sayfaGoster('ai-mentor-view')">
                                <span class="ai-badge">YENÄ°</span>
                                <i class="fas fa-robot"></i>
                                <h3>BurakAI Hoca</h3>
                                <p style="font-size: 0.9rem; opacity: 0.9;">Yapay Zeka Entegrasyonlu Ä°lk MÃ¼zik EÄŸitim Platformu.</p>
                                <p style="font-size: 0.8rem; color: #888; margin-top: 10px;">Ä°cranÄ± yÃ¼kle, anÄ±nda yorumla.</p>
                            </div>

                            <div class="dash-card" onclick="sayfaGoster('exam-categories-view')">
                                <i class="fas fa-graduation-cap"></i>
                                <h3>YETENEK SINAVI HAZIRLIK</h3>
                                <p>Dikte Ã§alÄ±ÅŸmalarÄ±, soru Ã§Ã¶zÃ¼mleri.</p>
                            </div>
                        </div>

                        <a href="https://wa.me/905335060921" target="_blank" class="dash-whatsapp-btn">
                            <i class="fab fa-whatsapp"></i> WhatsApp ile Ä°letiÅŸime GeÃ§
                        </a>
                    </div>

                    <div id="ai-mentor-view" class="view-section">
                        <div class="dashboard-header" style="display: flex; justify-content: space-between;">
                            <h2>BurakAI Hoca</h2>
                            <button onclick="window.history.back()" style="background:none; border:none; color:#666; cursor:pointer; font-size: 1rem;">â† Geri</button>
                        </div>
                        <p style="color: #888; margin-bottom: 20px;">BaÄŸlamanÄ± eline al, videonu veya sorunu gÃ¶nder. Ben her zaman buradayÄ±m.</p>
                        
                        <div class="chat-container">
                            <div class="chat-box" id="aiChatBox">
                                <div class="chat-message ai">
                                    <strong>BurakAI Hoca:</strong><br>
                                    Gel bakalÄ±m evladÄ±m, hoÅŸ geldin. SazÄ±n kucaÄŸÄ±ndaysa, gÃ¶nlÃ¼n de aÅŸka hazÄ±rsa aÅŸamayacaÄŸÄ±mÄ±z yokuÅŸ yok. 'Yorulduk' demek yok, 'yapamÄ±yorum' demek yok. Ben senin her adÄ±mda yanÄ±ndayÄ±m. Hadi bismillah diyelim, sor bakalÄ±m kafana takÄ±lan ÅŸey nedir?
                                </div>
                            </div>
                            
                            <div id="imagePreviewContainer">
                                <img id="imagePreview" src="" />
                                <span id="removeImage">KaldÄ±r</span>
                            </div>

                            <div class="chat-input-area">
                                <input type="file" id="fileInput" accept="image/*" style="display: none;">
                                
                                <button class="chat-action-btn" title="FotoÄŸraf YÃ¼kle" onclick="triggerFileUpload()">
                                    <i class="fas fa-camera"></i>
                                </button>
                                <button class="chat-action-btn" title="Video YÃ¼kle" onclick="alert('Video Ã¶zelliÄŸi yakÄ±nda gelecek aslan parÃ§asÄ±. Åimdilik fotoÄŸraf gÃ¶nderebilirsin.')">
                                    <i class="fas fa-video"></i>
                                </button>
                                <input type="text" class="chat-input" placeholder="Bir soru sor..." id="aiUserInput">
                                <button class="chat-send-btn" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
                            </div>
                        </div>
                    </div>

                    <div id="baglama-menu-view" class="view-section">
                        <div class="dashboard-header" style="display: flex; justify-content: space-between;">
                            <h2>BaÄŸlama EÄŸitimi</h2>
                            <button onclick="window.history.back()" style="background:none; border:none; color:#666; cursor:pointer; font-size: 1rem;">â† Geri</button>
                        </div>
                        <br>
                        <div class="category-grid">
                            <div class="cat-box" onclick="materyalAc('Teorik Bilgi')"><span class="cat-title">Ders NotlarÄ± (Teorik Bilgi)</span><span class="cat-desc">MÃ¼zik teorisi ve makamlar.</span></div>
                            <div class="cat-box" onclick="materyalAc('KÄ±sa Sap NotalarÄ±')"><span class="cat-title">KÄ±sa Sap TÃ¼rkÃ¼ NotalarÄ±</span><span class="cat-desc">KÄ±sa sap repertuvarÄ±.</span></div>
                            <div class="cat-box" onclick="materyalAc('Uzun Sap NotalarÄ±')"><span class="cat-title">Uzun Sap TÃ¼rkÃ¼ NotalarÄ±</span><span class="cat-desc">Uzun sap icra teknikleri.</span></div>
                            <div class="cat-box" onclick="materyalAc('Parmak Egzersizleri')"><span class="cat-title">Parmak Egzersizleri</span><span class="cat-desc">HÄ±z ve teknik geliÅŸtirici etÃ¼tler.</span></div>
                        </div>
                    </div>

                    <div id="materials-view" class="view-section">
                        <div class="dashboard-header" style="display: flex; justify-content: space-between;">
                            <h2 id="mat-category-title">Materyaller</h2>
                            <button onclick="window.history.back()" style="background:none; border:none; color:#666; cursor:pointer; font-size: 1rem;">â† Geri</button>
                        </div>
                        <div class="materials-grid" id="materials-container">
                            </div>
                    </div>

                    <div id="exam-categories-view" class="view-section">
                        <div class="dashboard-header" style="display: flex; justify-content: space-between;">
                            <h2>Yetenek SÄ±navÄ± HazÄ±rlÄ±k</h2>
                            <button onclick="window.history.back()" style="background:none; border:none; color:#666; cursor:pointer; font-size: 1rem;">â† Geri</button>
                        </div>
                        <br>
                        <div class="category-grid">
                            <div class="cat-box" onclick="yetenekKategoriAc('Dikte SorularÄ±')"><span class="cat-title">Dikte SorularÄ±</span><span class="cat-desc">Ä°ÅŸitme ve yazma Ã§alÄ±ÅŸmalarÄ±.</span></div>
                            <div class="cat-box" onclick="yetenekKategoriAc('Ritim TekrarÄ± SorularÄ±')"><span class="cat-title">Ritim TekrarÄ± SorularÄ±</span><span class="cat-desc">Ritim kulaÄŸÄ±nÄ± geliÅŸtirme.</span></div>
                            <div class="cat-box" onclick="yetenekKategoriAc('Tek Ses TekrarÄ± SorularÄ±')"><span class="cat-title">Tek Ses TekrarÄ± SorularÄ±</span><span class="cat-desc">Tek ses duyma Ã§alÄ±ÅŸmalarÄ±.</span></div>
                            <div class="cat-box" onclick="yetenekKategoriAc('Ã‡ift Ses TekrarÄ± SorularÄ±')"><span class="cat-title">Ã‡ift Ses TekrarÄ± SorularÄ±</span><span class="cat-desc">Ä°ki ses duyma Ã§alÄ±ÅŸmalarÄ±.</span></div>
                            <div class="cat-box" onclick="yetenekKategoriAc('ÃœÃ§ Ses TekrarÄ± SorularÄ±')"><span class="cat-title">ÃœÃ§ Ses TekrarÄ± SorularÄ±</span><span class="cat-desc">Akor duyma Ã§alÄ±ÅŸmalarÄ±.</span></div>
                            <div class="cat-box" onclick="yetenekKategoriAc('DÃ¶rt Ses TekrarÄ± SorularÄ±')"><span class="cat-title">DÃ¶rt Ses TekrarÄ± SorularÄ±</span><span class="cat-desc">Ä°leri seviye akor Ã§alÄ±ÅŸmalarÄ±.</span></div>
                            <div class="cat-box" onclick="yetenekKategoriAc('Solfej NotalarÄ±')"><span class="cat-title">Solfej NotalarÄ±</span><span class="cat-desc">DeÅŸifre ve okuma.</span></div>
                            <div class="cat-box" onclick="yetenekKategoriAc('Ezgi TekrarÄ± SorularÄ±')"><span class="cat-title">Ezgi TekrarÄ± SorularÄ±</span><span class="cat-desc">Melodik hafÄ±za Ã§alÄ±ÅŸmalarÄ±.</span></div>
                        </div>
                    </div>

                    <div id="exam-list-view" class="view-section">
                        <div class="dashboard-header" style="display: flex; justify-content: space-between;">
                            <h2 id="exam-list-title">Ã‡alÄ±ÅŸmalar</h2>
                            <button onclick="window.history.back()" style="background:none; border:none; color:#666; cursor:pointer; font-size: 1rem;">â† Geri</button>
                        </div>
                        <br>
                        <div id="exam-list-container" style="display: flex; flex-direction: column; gap: 10px;">
                            </div>
                    </div>

                    <div id="exam-detail-view" class="view-section">
                        <div class="dashboard-header" style="display: flex; justify-content: space-between;">
                            <h2 id="exam-detail-title">Ã‡alÄ±ÅŸma X</h2>
                            <button onclick="window.history.back()" style="background:none; border:none; color:#666; cursor:pointer; font-size: 1rem;">â† Listeye DÃ¶n</button>
                        </div>
                        <div class="exam-detail-container">
                            <p style="color:#888; margin-bottom:15px;">ğŸ§ Dikte KaydÄ±nÄ± Dinle:</p>
                            <iframe id="exam-audio-player" src="" width="100%" height="150" style="border:none; border-radius: 10px;" allow="autoplay"></iframe>
                            
                            <div class="answer-key-btn" onclick="cevapGoster()">
                                <i class="fas fa-eye"></i> CEVAP ANAHTARINI GÃ–RÃœNTÃœLE
                            </div>
                            <input type="hidden" id="current-answer-img" value="">
                        </div>
                    </div>

                </div>
            </div>
        </div>

    </div>

    <div class="image-modal" id="imgModal">
        <span class="close-modal" onclick="modalKapat()">Ã—</span>
        <img id="modalImg" src="" alt="Cevap AnahtarÄ±">
    </div>

    <footer>
        <div class="social-wrapper">
            <a href="https://www.instagram.com/baglamagram" target="_blank" class="social-item"><i class="fab fa-instagram"></i></a>
            <a href="https://open.spotify.com/intl-tr/artist/5rXy7D9yXqn3kOvLYXDxft" target="_blank" class="social-item"><i class="fab fa-spotify"></i></a>
            <a href="https://www.youtube.com/@baglamagram" target="_blank" class="social-item"><i class="fab fa-youtube"></i></a>
        </div>
        <p style="font-size: 0.8rem; color: #555;">Â© 2026 Mahmut Burak ASLANTAÅ.</p>
    </footer>

    <script>
        // --- 1. Ã–ÄRENCÄ° VERÄ°TABANI (YENÄ°LENMÄ°Å VE TEMÄ°ZLENMÄ°Å) ---
        const ogrenciler = {
            "ZWxpZmthcm1hbjEyMw==": { ad: "RWxpZg==", soyad: "S0FSTUFO" },            
            "bWFobXV0YnVyYWs=": { ad: "TWFobXV0IEJ1cmFr", soyad: "QVNMQU5UQcWe" },      
            "aGFsaWxndWxheWRpbjEyMw==": { ad: "SGFsaWw=", soyad: "R8OcTEFZRElO" },     
            "YW1hbnNlbmRlY2Fubw==": { ad: "R8Oka3R1xJ8=", soyad: "UEFJTlRFUg==" }, 
            "dGVreW9sZGV2cmlt": { ad: "RmVyaGF0ZSBDaXZhbmU=", soyad: "QkFLQU5F" }      
        };

        // --- 2. DÄ°KTE SES DOSYALARI ---
        const dikteVerileri = {
            1: "1CprU3vYtFIEZ0gRgReVEye4IHShh0y0_",
            2: "1F47H-u9OgakbY-Y8o0X3s_ago7C9x-RO",
            3: "1l11yz8LBCdNAVkA4dJDF_YefA4m62PxH",
            4: "1h_BxQSVd1saDgertInDrXgbU7p8kPdrT",
            5: "16zIsIzjvmznslqO4xi8LtvSE0H3UgEDf",
            6: "1cXuv3Qe-WgDNGP4tCgyDyHTrZAhmWiEK",
            7: "1ShwDrGKN0r1Q5WMrz1saX_KYFPDx1RdV",
            8: "1uyYxuJmbniDOLy5k9_C7ZcGI1yTwvdgx",
            9: "18RLPOB99gTjDZGqbPmanEIQ-nKFxIoa9",
            10: "1oMr4u1WJLiFxLLbMzAP3_40umU_Y3vq8",
            11: "1LyrE3Yi_xECEqIlwCP3-3FsrVtDBqjFs",
            12: "1fXUzZE1pIa-m1XtgD7giY-uiikdknZbc",
            13: "1TF_rBm31Ww8AszjQud4OCQP7SvWG2UK-",
            14: "12ckOq7FvW_tAIteDVxs11hNwpXw1mGmE",
            15: "1u0Gcj0M_Et5vXtBC1VUJeSJdg7VsqMCu",
            16: "1og4IiBkpgsxz2-zZF0TWCRRncWoW8eOB",
            17: "1qsJ-nLKY4V0-jQLoMxLxFOeVfD1u7rfg",
            19: "137H1eOM8qQoWZPDPi0QHyyKaiAbjMR1Q",
            20: "1327Yis-EDSEvKPxZu-H5wSA3mUC5IEXC",
            21: "1Ydo02tIquSSqO-cuF5fJ5jVBuI-X3rLj",
            22: "1pdHx7gHYkg1sEfu01AfVTxbpHQJ3GCOS"
        };

        // --- 3. DERS NOTLARI LÄ°STESÄ° ---
        const dersNotlariDosyalari = [
            { ad: "Temel MÃ¼zik Bilgileri 1", dosya: "1.png" },
            { ad: "Temel MÃ¼zik Bilgileri 2", dosya: "2.png" },
            { ad: "Nota SÃ¼re DeÄŸerleri 1", dosya: "3.png" },
            { ad: "Nota Ä°simleri ve NotalarÄ±n Yerleri", dosya: "4.png" },
            { ad: "BaÄŸlamanÄ±n BÃ¶lÃ¼mleri", dosya: "5.png" },
            { ad: "Ders Notu 6", dosya: "6.png" },
            { ad: "Parmak NumaralarÄ± (KÄ±sa Sap)", dosya: "7.png" },
            { ad: "Klavyede (Sapta) NotalarÄ±n Yerleri", dosya: "8.png" },
            { ad: "Sesli ve Sessiz SÃ¼re DeÄŸerleri", dosya: "9.png" },
            { ad: "Nota SÃ¼releri", dosya: "nota-sureleri.png" },
            { ad: "Nota SÃ¼releri 2", dosya: "nota-sureleri1.png" }
        ];

        // --- 4. KISA SAP NOTALARI ---
        const kisaSapNotalari = [
            { ad: "Gelin AyÅŸem", dosya: "a.jpg" },
            { ad: "Eklemedir Koca Konak", dosya: "b.jpg" },
            { ad: "Urfa'nÄ±n EtrafÄ±", dosya: "c.jpg" },
            { ad: "YeÅŸil BaÅŸlÄ± Telli Turnam", dosya: "d.jpg" },
            { ad: "Karahisar Kalesi", dosya: "e.jpg" },
            { ad: "Urfa'nÄ±n EtrafÄ± DumanlÄ± DaÄŸlar", dosya: "f.jpg" },
            { ad: "Uzun Ä°nce Bir YoldayÄ±m", dosya: "g.jpg" },
            { ad: "Ä°ÅŸte Gidiyorum Ã‡eÅŸm-i SiyahÄ±m", dosya: "h.jpg" },
            { ad: "Basit TÃ¼rkÃ¼ler", dosya: "i.jpg" },
            { ad: "Felek Ã‡akmaÄŸÄ±nÄ± ÃœstÃ¼me Ã‡aktÄ±", dosya: "j.jpg" },
            { ad: "Telli Turnam", dosya: "k.jpg" },
            { ad: "Emirim Suya Gider", dosya: "l.jpg" },
            { ad: "Denizlerin Kumuyum", dosya: "m.jpg" },
            { ad: "AynalÄ± KÃ¶rÃ¼k", dosya: "n.jpg" },
            { ad: "DeÄŸmen Benim GamlÄ± YaslÄ± GÃ¶nlÃ¼me", dosya: "o.jpg" },
            { ad: "Denizin Dibinde HatÃ§am", dosya: "p.jpg" },
            { ad: "KÃ¼tahyanÄ±n PÄ±narlarÄ±", dosya: "r.jpg" },
            { ad: "Dostum Dostum", dosya: "s.png?v=1" }, 
            { ad: "Han SarhoÅŸ HancÄ± SarhoÅŸ", dosya: "t.jpg" },
            { ad: "AltÄ±n YÃ¼zÃ¼ÄŸÃ¼m KÄ±rÄ±ldÄ±", dosya: "u.jpg" }
        ];

        // --- 5. PARMAK EGZERSÄ°ZLERÄ° ---
        const parmakEgzersizleri = [
            { ad: "AlÄ±ÅŸtÄ±rma 1", dosya: "alistirma-1.png" },
            { ad: "AlÄ±ÅŸtÄ±rma 2", dosya: "alistirma-2.png" },
            { ad: "4 Parmak EtÃ¼dÃ¼ 1", dosya: "4-parmak-etutdu1.png" },
            { ad: "4 Parmak EtÃ¼dÃ¼ 2", dosya: "4-parmak-etudu2.png" }
        ];

        function menuyuAcKapa() { document.getElementById("anaMenu").classList.toggle("aktif"); }
        function toggleSidebar() { document.getElementById("sidebar").classList.toggle("collapsed"); }
        function girisAc() { document.getElementById("login-overlay").style.display = "flex"; }
        function girisKapat() { document.getElementById("login-overlay").style.display = "none"; }

        document.getElementById("studentPass").addEventListener("keyup", function(event) {
            if (event.key === "Enter") { sistemeGiris(); }
        });

        function sistemeGiris() {
            // Åifrenin baÅŸÄ±ndaki ve sonundaki boÅŸluklarÄ± otomatik temizle (.trim())
            const hamSifre = document.getElementById("studentPass").value.trim();
            let sifre = "";
            
            try {
                // Åifreyi Base64'e Ã§evir
                sifre = btoa(unescape(encodeURIComponent(hamSifre)));
            } catch (e) {
                console.log("Åifre Ã§evrim hatasÄ±");
            }

            if (ogrenciler[sifre]) {
                const ogr = ogrenciler[sifre];
                
                let formatliAd = "Ã–ÄŸrenci";
                let formatliSoyad = "";

                try {
                    // Ä°simleri Base64'ten Ã§Ã¶z
                    let gercekAd = decodeURIComponent(escape(atob(ogr.ad)));
                    let gercekSoyad = decodeURIComponent(escape(atob(ogr.soyad)));
                    formatliAd = gercekAd.charAt(0).toUpperCase() + gercekAd.slice(1).toLowerCase();
                    formatliSoyad = gercekSoyad.toUpperCase();
                } catch (err) {
                    console.log("Ä°sim Ã§Ã¶zme hatasÄ±");
                }
                
                document.getElementById("displayAd").innerText = formatliAd;
                document.getElementById("displaySoyad").innerText = formatliSoyad;
                document.getElementById("welcomeTitle").innerText = "Merhaba " + formatliAd + "!";
                
                girisKapat();
                document.getElementById("portal-entry-btn-section").style.display = "none";
                document.getElementById("public-content").style.display = "none";
                document.getElementById("student-portal").style.display = "block";
                
                history.replaceState({view: 'dashboard-view'}, "", "#dashboard");
            } else {
                document.getElementById("loginError").style.display = "block";
            }
        }

        function sayfaGoster(id, addToHistory = true) {
            document.querySelectorAll(".view-section").forEach(s => s.classList.remove("active"));
            document.getElementById(id).classList.add("active");
            if(addToHistory) history.pushState({view: id}, "", "#" + id.replace("-view", ""));
            if(window.innerWidth < 900) { document.getElementById("sidebar").classList.add("collapsed"); }
        }

        window.onpopstate = function(event) {
            if(event.state && event.state.view) sayfaGoster(event.state.view, false);
            else sayfaGoster('dashboard-view', false);
        };

        // MATERYAL AÃ‡MA FONKSÄ°YONU
        function materyalAc(kategori) {
            document.getElementById("mat-category-title").innerText = kategori;
            const container = document.getElementById("materials-container");
            container.innerHTML = ""; 

            if (kategori === 'Teorik Bilgi') {
                dersNotlariDosyalari.forEach(item => {
                    container.innerHTML += `
                        <div class="mat-item" onclick="resimGosterModal('./baglama-ders-teori/${item.dosya}')" style="cursor:pointer;">
                            <i class="fas fa-file-image" style="color: var(--accent); font-size: 2rem; display: block; margin-bottom: 10px;"></i>
                            <span>${item.ad}</span>
                        </div>
                    `;
                });
            } else if (kategori === 'KÄ±sa Sap NotalarÄ±') {
                kisaSapNotalari.forEach(item => {
                    container.innerHTML += `
                        <div class="mat-item" onclick="resimGosterModal('./kisa-sap/${item.dosya}')" style="cursor:pointer;">
                            <i class="fas fa-music" style="color: var(--accent); font-size: 2rem; display: block; margin-bottom: 10px;"></i>
                            <span>${item.ad}</span>
                        </div>
                    `;
                });
            } else if (kategori === 'Parmak Egzersizleri') {
                parmakEgzersizleri.forEach(item => {
                    container.innerHTML += `
                        <div class="mat-item" onclick="resimGosterModal('./parmak-egzersiz/${item.dosya}')" style="cursor:pointer;">
                            <i class="fas fa-hand-paper" style="color: var(--accent); font-size: 2rem; display: block; margin-bottom: 10px;"></i>
                            <span>${item.ad}</span>
                        </div>
                    `;
                });
            } else {
                container.innerHTML = "<p style='color:#888; padding: 20px;'>Bu kategoride henÃ¼z materyal bulunmuyor.</p>";
            }
            sayfaGoster("materials-view");
        }

        function yetenekKategoriAc(kategoriAdi) {
            document.getElementById("exam-list-title").innerText = kategoriAdi;
            const listeContainer = document.getElementById("exam-list-container");
            listeContainer.innerHTML = "";
            if (kategoriAdi === "Dikte SorularÄ±") {
                for (let i = 1; i <= 22; i++) {
                    if (i === 18) continue;
                    let driveId = dikteVerileri[i] || ""; 
                    listeContainer.innerHTML += `
                        <div class="exam-row" onclick="dikteDetayAc(${i}, '${driveId}', 'Ã‡alÄ±ÅŸma ${i}')">
                            <span style="color:#fff; font-weight:500;">Ã‡alÄ±ÅŸma ${i}</span>
                            <i class="fas fa-chevron-right" style="color:var(--accent);"></i>
                        </div>
                    `;
                }
            } else {
                listeContainer.innerHTML = "<p style='color:#888;'>Bu kategoride henÃ¼z iÃ§erik yok.</p>";
            }
            sayfaGoster("exam-list-view");
        }

        function dikteDetayAc(no, audioId, baslik) {
            document.getElementById("exam-detail-title").innerText = baslik;
            let embedUrl = audioId ? "https://drive.google.com/file/d/" + audioId + "/preview" : "";
            document.getElementById("exam-audio-player").src = embedUrl;
            document.getElementById("current-answer-img").value = "./dikte-cevaplar/calisma-" + no + ".png"; 
            sayfaGoster("exam-detail-view");
        }

        function resimGosterModal(yol) {
            document.getElementById("modalImg").src = yol;
            document.getElementById("imgModal").style.display = "flex";
        }

        function cevapGoster() {
            const link = document.getElementById("current-answer-img").value;
            if(link) {
                resimGosterModal(link);
            } else {
                alert("Cevap anahtarÄ± bulunamadÄ±.");
            }
        }
        function modalKapat() { document.getElementById("imgModal").style.display = "none"; }

        // --- YENÄ° EKLENEN FOTOÄRAF VE CHAT MANTIÄI ---
        let selectedImageBase64 = null;

        function triggerFileUpload() {
            document.getElementById('fileInput').click();
        }

        // Resim SeÃ§ildiÄŸinde
        document.getElementById('fileInput').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(event) {
                selectedImageBase64 = event.target.result;
                // Ã–nizlemeyi gÃ¶ster
                const imgPreview = document.getElementById('imagePreview');
                imgPreview.src = selectedImageBase64;
                document.getElementById('imagePreviewContainer').style.display = 'block';
            };
            reader.readAsDataURL(file);
        });

        // Resmi Ä°ptal Et
        document.getElementById('removeImage').onclick = function() {
            selectedImageBase64 = null;
            document.getElementById('fileInput').value = "";
            document.getElementById('imagePreviewContainer').style.display = 'none';
        }

        async function sendMessage() {
            const input = document.getElementById("aiUserInput");
            const box = document.getElementById("aiChatBox");
            const msgText = input.value.trim();
            
            // EÄŸer ne mesaj ne de resim varsa gÃ¶nderme
            if(msgText === "" && !selectedImageBase64) return;

            // 1. KullanÄ±cÄ± mesajÄ±nÄ± bas
            const userMsg = document.createElement("div");
            userMsg.className = "chat-message user";
            
            let userContent = "";
            if (selectedImageBase64) {
                userContent += `<img src="${selectedImageBase64}" style="max-width:200px; display:block; margin-bottom:5px;">`;
            }
            if (msgText) {
                userContent += `<strong>Sen:</strong><br>${msgText}`;
            }
            userMsg.innerHTML = userContent;
            box.appendChild(userMsg);
            
            // InputlarÄ± temizle
            input.value = "";
            const imageToSend = selectedImageBase64; // GÃ¶ndermek iÃ§in yedeÄŸini al
            
            // Resmi arayÃ¼zden temizle
            selectedImageBase64 = null;
            document.getElementById('fileInput').value = "";
            document.getElementById('imagePreviewContainer').style.display = 'none';
            
            box.scrollTop = box.scrollHeight;

            // 2. YÃ¼kleniyor efekti
            const loadingBubble = document.createElement("div");
            loadingBubble.className = "chat-message ai";
            loadingBubble.id = "loadingBubble";
            loadingBubble.innerHTML = "<em>Burak Hoca inceliyor... (YazÄ±yor)</em>";
            box.appendChild(loadingBubble);
            box.scrollTop = box.scrollHeight;

            try {
                // 3. API'ye GÃ¶nder
                const response = await fetch('/api/chat', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ 
                        message: msgText || "Åu gÃ¶nderdiÄŸim gÃ¶rsele bir bak hocam.", 
                        image: imageToSend 
                    })
                });

                const data = await response.json();
                
                document.getElementById("loadingBubble").remove();
                
                const aiMsg = document.createElement("div");
                aiMsg.className = "chat-message ai";
                aiMsg.innerHTML = "<strong>BurakAI Hoca:</strong><br>" + data.reply.replace(/\n/g, "<br>");
                box.appendChild(aiMsg);

            } catch (err) {
                document.getElementById("loadingBubble").innerHTML = "BaÄŸlantÄ± koptu aslan parÃ§asÄ±.";
                console.error(err);
            }
            
            box.scrollTop = box.scrollHeight;
        }
    </script>
</body>
</html>
